<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Panel</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      display: flex;
      height: 100vh;
      background: #f7f7f7;
    }
    .sidebar {
      width: 220px;
      background: #333;
      color: white;
      display: flex;
      flex-direction: column;
      padding: 20px;
    }
    .sidebar h2 {
      font-size: 20px;
      margin-bottom: 20px;
    }
    .sidebar button {
      margin-bottom: 10px;
      padding: 10px;
      width: 100%;
      background: #444;
      color: white;
      border: none;
      cursor: pointer;
      text-align: left;
    }
    .sidebar button.active {
      background: #ff9900;
    }
    .main-panel {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }
    .form-section {
      margin-bottom: 20px;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }
    .form-section h3 {
      margin-top: 0;
    }
    .form-section input,
    .form-section select,
    .form-section textarea {
      width: 100%;
      padding: 8px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-family: inherit;
      font-size: 1rem;
      box-sizing: border-box;
    }
    .form-section button {
      background: #28a745;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1rem;
    }
    .data-preview {
      background: #fff;
      padding: 15px;
      border-radius: 6px;
      box-shadow: 0 0 3px rgba(0,0,0,0.1);
      max-height: 300px;
      overflow-y: auto;
    }
    .data-preview h4 {
      margin-top: 0;
      margin-bottom: 10px;
    }
    .data-preview ul {
      list-style-type: none;
      padding-left: 0;
      margin: 0;
    }
    .data-preview li {
      border-bottom: 1px solid #eee;
      padding: 6px 0;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 0.9rem;
    }
    .data-preview img {
      width: 40px;
      height: 40px;
      object-fit: cover;
      border-radius: 4px;
    }
    .no-data {
      color: #666;
      font-style: italic;
      padding: 8px 0;
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <h2>Admin Panel</h2>
    <button class="tab-btn active" onclick="showSection('items')">Items</button>
    <button class="tab-btn" onclick="showSection('categories')">Categories</button>
    <button class="tab-btn" onclick="showSection('users')">Users</button>
    <button class="tab-btn" onclick="showSection('tables')">Tables</button>
    <button class="tab-btn" onclick="showSection('kitchens')">Kitchens</button>
    <button onclick="window.location.href='pos.html'">Go to POS</button>
  </div>

  <div class="main-panel">
    <!-- Items Section -->
    <div id="items" class="form-section">
      <h3>Add Item</h3>
      <input type="text" id="itemName" placeholder="Item Name" />
      <input type="number" step="0.01" id="itemPrice" placeholder="Item Price" />
      <select id="itemCategory">
        <option value="">Select Category</option>
      </select>
      <textarea id="itemDescription" placeholder="Description" rows="3"></textarea>
      
      <label for="itemKitchen">Select Kitchen:</label>
      <select id="itemKitchen">
        <option value="">Select Kitchen</option>
      </select>

      <label for="itemImage">Upload Image:</label>
      <input type="file" id="itemImage" accept="image/*" />

      <button onclick="addItem()">Add Item</button>

      <div class="data-preview">
        <h4>Items:</h4>
        <ul id="itemList" class="item-list"></ul>
      </div>
    </div>

    <!-- Categories Section -->
    <div id="categories" class="form-section" style="display:none">
      <h3>Add Category</h3>
      <input type="text" id="categoryName" placeholder="Category Name" />
      <button onclick="addCategory()">Add Category</button>
      <div class="data-preview">
        <h4>Categories:</h4>
        <ul id="categoryList"></ul>
      </div>
    </div>

    <!-- Users Section -->
    <div id="users" class="form-section" style="display:none">
      <h3>Add User</h3>
      <input type="text" id="userName" placeholder="User Name" />
      <select id="userRole">
        <option value="admin">Admin</option>
        <option value="cashier">Cashier</option>
      </select>
      <button onclick="addUser()">Add User</button>
      <div class="data-preview">
        <h4>Users:</h4>
        <ul id="userList"></ul>
      </div>
    </div>

    <!-- Tables Section -->
    <div id="tables" class="form-section" style="display:none">
      <h3>Add Table</h3>
      <input type="text" id="tableName" placeholder="Table Name" />
      <button onclick="addTable()">Add Table</button>
      <div class="data-preview">
        <h4>Tables:</h4>
        <ul id="tableList"></ul>
      </div>
    </div>

    <!-- Kitchens Section -->
    <div id="kitchens" class="form-section" style="display:none">
      <h3>Add Kitchen</h3>
      <input type="text" id="kitchenName" placeholder="Kitchen Name" />
      <button onclick="addKitchen()">Add Kitchen</button>
      <div class="data-preview">
        <h4>Kitchens:</h4>
        <ul id="kitchenList"></ul>
      </div>
    </div>
  </div>

<script>
  // Tab switching
  function showSection(id) {
    document.querySelectorAll('.form-section').forEach(sec => sec.style.display = 'none');
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
    document.getElementById(id).style.display = 'block';
    event.target.classList.add('active');
  }

  // --- Category Management ---
  function addCategory() {
    const name = document.getElementById('categoryName').value.trim();
    if (!name) return alert('Please enter category name');

    let categories = JSON.parse(localStorage.getItem('categories') || '[]');
    if(categories.find(c => c.toLowerCase() === name.toLowerCase())) {
      return alert('Category already exists!');
    }
    categories.push(name);
    localStorage.setItem('categories', JSON.stringify(categories));
    renderCategories(categories);
    loadCategoryOptions();
    document.getElementById('categoryName').value = '';
  }
  function renderCategories(categories) {
    const list = document.getElementById('categoryList');
    list.innerHTML = '';
    if(categories.length === 0) {
      list.innerHTML = '<li class="no-data">No categories yet</li>';
      return;
    }
    categories.forEach(cat => {
      const li = document.createElement('li');
      li.textContent = cat;
      list.appendChild(li);
    });
  }
  function loadCategoryOptions() {
    const select = document.getElementById('itemCategory');
    select.innerHTML = '<option value="">Select Category</option>';
    const categories = JSON.parse(localStorage.getItem('categories') || '[]');
    categories.forEach(cat => {
      const opt = document.createElement('option');
      opt.value = cat;
      opt.textContent = cat;
      select.appendChild(opt);
    });
  }

  // --- Kitchen Management ---
  function addKitchen() {
    const name = document.getElementById('kitchenName').value.trim();
    if (!name) return alert('Please enter kitchen name');

    let kitchens = JSON.parse(localStorage.getItem('kitchens') || '[]');
    if(kitchens.find(k => k.toLowerCase() === name.toLowerCase())) {
      return alert('Kitchen already exists!');
    }
    kitchens.push({name});
    localStorage.setItem('kitchens', JSON.stringify(kitchens));
    renderKitchens(kitchens);
    loadKitchenOptions();
    document.getElementById('kitchenName').value = '';
  }
  function renderKitchens(kitchens) {
    const list = document.getElementById('kitchenList');
    list.innerHTML = '';
    if(kitchens.length === 0) {
      list.innerHTML = '<li class="no-data">No kitchens yet</li>';
      return;
    }
    kitchens.forEach(k => {
      const li = document.createElement('li');
      li.textContent = k.name;
      list.appendChild(li);
    });
  }
  function loadKitchenOptions() {
    const select = document.getElementById('itemKitchen');
    select.innerHTML = '<option value="">Select Kitchen</option>';
    const kitchens = JSON.parse(localStorage.getItem('kitchens') || '[]');
    kitchens.forEach(k => {
      const opt = document.createElement('option');
      opt.value = k.name;
      opt.textContent = k.name;
      select.appendChild(opt);
    });
  }

  // --- Table Management ---
  function addTable() {
    const name = document.getElementById('tableName').value.trim();
    if (!name) return alert('Please enter table name');

    let tables = JSON.parse(localStorage.getItem('tables') || '[]');
    if(tables.find(t => t.toLowerCase() === name.toLowerCase())) {
      return alert('Table already exists!');
    }
    tables.push(name);
    localStorage.setItem('tables', JSON.stringify(tables));
    renderTables(tables);
    document.getElementById('tableName').value = '';
  }
  function renderTables(tables) {
    const list = document.getElementById('tableList');
    list.innerHTML = '';
    if(tables.length === 0) {
      list.innerHTML = '<li class="no-data">No tables yet</li>';
      return;
    }
    tables.forEach(table => {
      const li = document.createElement('li');
      li.textContent = table;
      list.appendChild(li);
    });
  }

  // --- User Management ---
  function addUser() {
    const name = document.getElementById('userName').value.trim();
    const role = document.getElementById('userRole').value;
    if (!name) return alert('Please enter user name');

    let users = JSON.parse(localStorage.getItem('users') || '[]');
    if(users.find(u => u.name.toLowerCase() === name.toLowerCase())) {
      return alert('User already exists!');
    }
    users.push({name, role});
    localStorage.setItem('users', JSON.stringify(users));
    renderUsers(users);
    document.getElementById('userName').value = '';
  }
  function renderUsers(users) {
    const list = document.getElementById('userList');
    list.innerHTML = '';
    if(users.length === 0) {
      list.innerHTML = '<li class="no-data">No users yet</li>';
      return;
    }
    users.forEach(user => {
      const li = document.createElement('li');
      li.textContent = `${user.name} (${user.role})`;
      list.appendChild(li);
    });
  }

  // --- Item Management ---
  function addItem() {
    const name = document.getElementById('itemName').value.trim();
    const price = parseFloat(document.getElementById('itemPrice').value);
    const category = document.getElementById('itemCategory').value;
    const description = document.getElementById('itemDescription').value.trim();
    const kitchen = document.getElementById('itemKitchen').value;
    const imageInput = document.getElementById('itemImage');
    const file = imageInput.files[0];

    if (!name || !price || !category) return alert('Please fill item name, price, and select category');

    let items = JSON.parse(localStorage.getItem('items') || '[]');
    if(items.find(i => i.name.toLowerCase() === name.toLowerCase() && i.category === category)) {
      return alert('Item with same name exists in this category!');
    }

    if (file) {
      const reader = new FileReader();
      reader.onload = function(event) {
        const base64Img = event.target.result;
        saveItem(name, price, category, description, kitchen, base64Img);
      }
      reader.readAsDataURL(file);
    } else {
      saveItem(name, price, category, description, kitchen, null);
    }
  }

  function saveItem(name, price, category, description, kitchen, base64Img) {
    let items = JSON.parse(localStorage.getItem('items') || '[]');
    const id = Date.now();
    items.push({ id, name, price, category, description, kitchen, image: base64Img });
    localStorage.setItem('items', JSON.stringify(items));
    renderItems(items);
    clearItemForm();
  }

  function clearItemForm() {
    document.getElementById('itemName').value = '';
    document.getElementById('itemPrice').value = '';
    document.getElementById('itemCategory').value = '';
    document.getElementById('itemDescription').value = '';
    document.getElementById('itemKitchen').value = '';
    document.getElementById('itemImage').value = '';
  }

  function renderItems(items) {
    const list = document.getElementById('itemList');
    list.innerHTML = '';
    if(items.length === 0) {
      list.innerHTML = '<li class="no-data">No items yet</li>';
      return;
    }
    items.forEach(item => {
      const li = document.createElement('li');
      const imgHTML = item.image
        ? `<img src="${item.image}" alt="${item.name}">`
        : `<div style="width:40px; height:40px; background:#ccc; border-radius:4px;"></div>`;
      li.innerHTML = `
        ${imgHTML}
        <div>
          <strong>${item.name}</strong> (₹${item.price.toFixed(2)}) - <em>${item.category}</em><br/>
          Kitchen: ${item.kitchen || '-'}<br/>
          <small>${item.description || ''}</small>
        </div>
      `;
      list.appendChild(li);
    });
  }

  // On page load, render all
  document.addEventListener('DOMContentLoaded', () => {
    renderCategories(JSON.parse(localStorage.getItem('categories') || '[]'));
    renderItems(JSON.parse(localStorage.getItem('items') || '[]'));
    renderUsers(JSON.parse(localStorage.getItem('users') || '[]'));
    renderTables(JSON.parse(localStorage.getItem('tables') || '[]'));
    renderKitchens(JSON.parse(localStorage.getItem('kitchens') || '[]'));
    loadCategoryOptions();
    loadKitchenOptions();
  });
</script>
</body>
</html>
