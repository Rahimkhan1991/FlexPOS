<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data Backup</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-gray-100 to-gray-200 min-h-screen flex items-center justify-center p-6">

  <div class="bg-white rounded-2xl shadow-2xl w-full max-w-3xl p-8 text-center">
    <h2 class="text-2xl font-bold text-gray-800 mb-6">Data Backup</h2>

    <p class="mb-6 text-gray-600">Download all your app data as a single backup file. This includes Items, Categories, Tables, Kitchens, Users, and System Settings.</p>

    <button id="backupBtn" class="bg-indigo-500 hover:bg-indigo-600 text-white px-8 py-3 rounded-xl font-semibold shadow-md transition">
      Download Backup
    </button>

    <div class="mt-6">
      <button id="backBtn" class="bg-gray-300 hover:bg-gray-400 text-gray-800 px-6 py-3 rounded-xl font-semibold shadow-md transition">
        Back
      </button>
    </div>
  </div>

  <script>
    const backupBtn = document.getElementById('backupBtn');
    const backBtn = document.getElementById('backBtn');

    backupBtn.addEventListener('click', () => {
      const data = {
        items: JSON.parse(localStorage.getItem('items') || '[]'),
        categories: JSON.parse(localStorage.getItem('categories') || '[]'),
        tables: JSON.parse(localStorage.getItem('tables') || '[]'),
        kitchens: JSON.parse(localStorage.getItem('kitchens') || '[]'),
        users: JSON.parse(localStorage.getItem('users') || '[]'),
        systemSettings: JSON.parse(localStorage.getItem('systemSettings') || 'null')
      };

      const dataStr = JSON.stringify(data, null, 2);
      const blob = new Blob([dataStr], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `pos_backup_${new Date().toISOString().slice(0,10)}.json`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    });

    backBtn.addEventListener('click', () => {
      window.history.back();
    });
  </script>

</body>
</html>
